
<div class="min-vh-100 d-flex flex-column pb-safe">
    
    <!-- Decoración Superior (Idéntica al login y registro) -->
    <div class="position-relative w-100 flex-shrink-0" style="height: 25vh; background: linear-gradient(135deg, #0d6efd, #0dcaf0); border-bottom-left-radius: 30px; border-bottom-right-radius: 30px;">
        <a href="#perfil" class="position-absolute text-white" style="top: 20px; left: 20px; font-size: 1.5rem; z-index: 20;">
            <i class="bi bi-arrow-left-short"></i>
        </a>
        <div class="position-absolute top-50 start-50 translate-middle text-center text-white w-100">
            <!-- Icono de seguridad -->
            <i class="bi bi-shield-key-fill" style="font-size: 4rem; filter: drop-shadow(0px 4px 6px rgba(0,0,0,0.2));"></i>
            <h2 class="fw-bold mt-2">Seguridad</h2>
        </div>
    </div>

    <!-- Contenedor del Formulario (Tarjeta Blur Idéntica) -->
    <div class="flex-grow-1 d-flex flex-column px-4" style="margin-top: -30px; z-index: 10;">
        
        <div class="card border-0 shadow-sm rounded-4 flex-grow-1 p-4 mb-4" style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);">
            
            <h4 class="fw-bold text-center text-dark mb-4">Actualizar Clave</h4>
            <p class="text-center text-muted small mb-4">Ingresa tu contraseña actual y la nueva contraseña que deseas establecer.</p>

            <form id="form-cambiar-pass">
                
                <!-- Input Contraseña Actual -->
                <div class="form-floating mb-3 position-relative">
                    <input type="password" class="form-control rounded-3 border-0 bg-light" id="passActual" placeholder="Contraseña Actual" required>
                    <label for="passActual" class="text-muted"><i class="bi bi-unlock me-2"></i>Contraseña Actual</label>
                    <button type="button" class="btn position-absolute top-50 end-0 translate-middle-y me-1 border-0 bg-transparent text-secondary" onclick="togglePass('passActual', 'ojoActual')">
                        <i class="bi bi-eye-fill fs-5" id="ojoActual"></i>
                    </button>
                </div>

                <!-- Input Nueva Contraseña -->
                <div class="form-floating mb-3 position-relative mt-4">
                    <input type="password" class="form-control rounded-3 border-0 bg-light" id="passNueva" placeholder="Nueva Contraseña" required>
                    <label for="passNueva" class="text-muted"><i class="bi bi-lock me-2"></i>Nueva Contraseña</label>
                    <button type="button" class="btn position-absolute top-50 end-0 translate-middle-y me-1 border-0 bg-transparent text-secondary" onclick="togglePass('passNueva', 'ojoNueva')">
                        <i class="bi bi-eye-fill fs-5" id="ojoNueva"></i>
                    </button>
                </div>

                <!-- Input Confirmar Nueva Contraseña -->
                <div class="form-floating mb-4 position-relative">
                    <input type="password" class="form-control rounded-3 border-0 bg-light" id="passConfirmar" placeholder="Confirmar Contraseña" required>
                    <label for="passConfirmar" class="text-muted"><i class="bi bi-check-circle me-2"></i>Confirmar Contraseña</label>
                    <button type="button" class="btn position-absolute top-50 end-0 translate-middle-y me-1 border-0 bg-transparent text-secondary" onclick="togglePass('passConfirmar', 'ojoConfirmar')">
                        <i class="bi bi-eye-fill fs-5" id="ojoConfirmar"></i>
                    </button>
                </div>

                <!-- Alertas de Error (Ocultas por defecto) -->
                <div id="alertaPass" class="alert alert-danger d-none small py-2 rounded-3" role="alert"></div>
                <div id="exitoPass" class="alert alert-success d-none small py-2 rounded-3" role="alert"></div>

                <!-- Botón de Envío -->
                <button type="submit" class="btn btn-primary w-100 rounded-pill py-3 fw-bold shadow-sm d-flex justify-content-center align-items-center mt-2" id="btnActualizarPass">
                    <span id="btnPassText">Guardar Cambios</span>
                    <div class="spinner-border spinner-border-sm text-white ms-2 d-none" role="status" id="btnPassSpinner">
                        <span class="visually-hidden">Cargando...</span>
                    </div>
                </button>

            </form>

        </div>
    </div>
</div>

<!-- Scripts integrados en la vista para asegurar que se ejecuten en la SPA -->



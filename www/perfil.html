<!-- Vista: perfil.html -->
<!-- Contenedor Principal SPA -->
<div class="min-vh-100 d-flex flex-column pb-safe" style="background-color: #f8f9fa;">
    
    <!-- Decoraci√≥n Superior -->
    <div class="position-relative w-100 flex-shrink-0" style="height: 20vh; background: linear-gradient(135deg, #0d6efd, #0dcaf0); border-bottom-left-radius: 30px; border-bottom-right-radius: 30px;">
    </div>

    <!-- Contenedor del Perfil -->
    <div class="flex-grow-1 d-flex flex-column px-4" style="margin-top: -65px; z-index: 10;">
        
        <!-- Avatar y Nombre -->
        <div class="text-center mb-4">
            <!-- Imagen de perfil con borde blanco para resaltar sobre el fondo -->
            <img src="https://ui-avatars.com/api/?name=Usuario&background=0d6efd&color=fff&size=150" 
                 alt="Avatar" 
                 class="rounded-circle shadow-sm mb-3 bg-white p-1" 
                 id="userAvatar"
                 style="width: 130px; height: 130px; object-fit: cover; border: 4px solid white;">
            
            <h4 class="fw-bold text-dark mb-0" id="userName">Cargando...</h4>
            <p class="text-muted small" id="userEmail">cargando@email.com</p>
            
            <div class="d-inline-block bg-warning text-dark px-3 py-1 rounded-pill mt-2 fw-bold shadow-sm">
                <i class="bi bi-key-fill me-1"></i> PIN: <span id="userPin" class="font-monospace">------</span>
            </div>
        </div>

        <!-- Tarjeta de Detalles -->
        <div class="card border-0 shadow-sm rounded-4 mb-4">
            <div class="card-body p-4">
                <h6 class="fw-bold text-secondary mb-3 border-bottom pb-2">Informaci√≥n Personal</h6>
                
                <div class="d-flex justify-content-between mb-3">
                    <span class="text-muted"><i class="bi bi-telephone me-2"></i>Tel√©fono</span>
                    <span class="fw-medium text-dark" id="userPhone">--</span>
                </div>

                <div class="d-flex justify-content-between">
                    <span class="text-muted"><i class="bi bi-calendar-event me-2"></i>Edad</span>
                    <span class="fw-medium text-dark" id="userAge">-- a√±os</span>
                </div>
            </div>
        </div>

        <!-- Tarjeta de Emergencia -->
        <div class="card border-0 shadow-sm rounded-4 mb-4">
            <div class="card-body p-4">
                <h6 class="fw-bold text-danger mb-3 border-bottom border-danger pb-2">Contacto de Emergencia</h6>
                
                <div class="d-flex justify-content-between mb-3">
                    <span class="text-muted"><i class="bi bi-person-hearts me-2"></i>Nombre</span>
                    <span class="fw-medium text-dark text-end" id="userEmgName">--</span>
                </div>

                <div class="d-flex justify-content-between">
                    <span class="text-muted"><i class="bi bi-telephone-plus me-2"></i>Tel√©fono</span>
                    <span class="fw-medium text-dark" id="userEmgPhone">--</span>
                </div>
            </div>
        </div>

        <!-- Botones de Acci√≥n -->
        <div class="d-flex flex-column gap-3 mb-5 pb-5">
            <a href="#editar_perfil" class="btn btn-primary rounded-pill py-3 fw-bold shadow-sm">
                <i class="bi bi-pencil-square me-2"></i>Editar Perfil
            </a>
            <a href="#cambiarPass" class="btn btn-outline-secondary rounded-pill py-3 fw-bold bg-white shadow-sm">
                <i class="bi bi-shield-lock me-2"></i>Cambiar Contrase√±a
            </a>
        </div>

    </div>
</div>

<!-- üî• EL TRUCO MAGICO PARA SPA: Este elemento invisible ejecuta la carga de datos en el milisegundo exacto en que la vista se inyecta en la pantalla -->
<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onload="if(typeof window.cargarDatosPerfil === 'function') window.cargarDatosPerfil();" style="display:none;" aria-hidden="true">
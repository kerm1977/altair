<div class="app-container fade-in bg-white min-h-screen pb-5">
    
    <!-- CABECERA -->
    <div class="d-flex align-items-center justify-content-between mb-4 mt-2 px-1">
        <button onclick="ViewControllers.player.closeModule()" class="btn btn-light rounded-circle shadow-sm flex-center border" style="width: 45px; height: 45px;">
            <i class="ph-bold ph-arrow-left text-dark fs-5"></i>
        </button>
        <div class="text-center">
            <h2 class="fw-black mb-0 text-warning h4">Música Tribu</h2>
            <small class="text-muted fw-bold" style="font-size: 0.65rem; letter-spacing: 1px;">BIBLIOTECA OFICIAL</small>
        </div>
        <div style="width: 45px;"></div>
    </div>

    <!-- ZONA DEL REPRODUCTOR (SIN RECUADRO NI SOMBRA) -->
    <div class="text-center py-2 mb-4 position-relative">
        
        <!-- Carátula Rotativa -->
        <div class="mb-4 d-flex justify-content-center">
            <div class="position-relative">
                <img src="logo.png" id="player-cover" class="rounded-circle shadow-lg border-4 border-warning" 
                     style="width: 180px; height: 180px; object-fit: cover; transition: all 0.5s ease;">
            </div>
        </div>

        <!-- Información de la pista -->
        <div class="mb-4 px-2">
            <h5 id="player-title" class="fw-black text-dark mb-1 text-truncate px-3">Selecciona una canción</h5>
            <div id="player-status" class="badge bg-warning-subtle text-warning rounded-pill px-3 py-1 fw-bold" style="font-size: 0.7rem;">LISTO</div>
        </div>

        <!-- Barra de Progreso Interactiva -->
        <div class="px-4 mb-2">
            <div class="progress bg-secondary-subtle" style="height: 8px; cursor: pointer; border-radius: 10px;" onclick="ViewControllers.player.seek(event)">
                <div id="player-progress" class="progress-bar bg-warning progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
            </div>
        </div>
        
        <div class="d-flex justify-content-between small text-muted mb-4 px-4 fw-bold" style="font-size: 0.75rem;">
            <span id="time-current">00:00</span>
            <span id="time-total">00:00</span>
        </div>

        <!-- Controles de Reproducción -->
        <div class="d-flex align-items-center justify-content-center gap-4">
            <button onclick="ViewControllers.player.prev()" class="btn btn-light rounded-circle border-0 text-muted shadow-sm">
                <i class="ph-fill ph-skip-back fs-3"></i>
            </button>
            
            <button onclick="ViewControllers.player.togglePlay()" id="btn-play-pause" class="btn btn-warning rounded-circle shadow-lg text-white flex-center" style="width: 75px; height: 75px;">
                <i class="ph-fill ph-play fs-1 ms-1"></i>
            </button>

            <button onclick="ViewControllers.player.stop()" class="btn btn-light rounded-circle border-0 text-muted shadow-sm" title="Detener">
                <i class="ph-fill ph-stop fs-3"></i>
            </button>

            <button onclick="ViewControllers.player.next()" class="btn btn-light rounded-circle border-0 text-muted shadow-sm">
                <i class="ph-fill ph-skip-forward fs-3"></i>
            </button>
        </div>
    </div>

    <!-- LISTA DE CANCIONES -->
    <div class="px-2 mt-2">
        <div class="d-flex align-items-center justify-content-between mb-3">
            <h6 class="fw-bold text-muted text-uppercase small mb-0">Mi Playlist</h6>
            <span id="song-count" class="badge bg-light text-dark border rounded-pill">0 canciones</span>
        </div>
        
        <!-- Buscador Naranja -->
        <div class="input-wrapper mb-4 shadow-sm position-relative">
            <i class="ph ph-magnifying-glass text-muted position-absolute top-50 start-0 translate-middle-y ms-3"></i>
            <input type="text" class="form-control ps-5 border-0 bg-light rounded-4 py-3" placeholder="Buscar por nombre..." oninput="ViewControllers.player.filterSongs(this.value)">
        </div>

        <!-- Contenedor dinámico -->
        <div id="playlist-container" class="pb-5">
            <div class="text-center py-5">
                <div class="spinner-border text-warning" role="status"></div>
                <p class="text-muted mt-2 small">Sincronizando archivos...</p>
            </div>
        </div>
    </div>

    <!-- BOTÓN FLOTANTE: SUBIR -->
    <button onclick="ViewControllers.player.showUploadModal()" 
            class="btn btn-warning text-white shadow-lg rounded-circle flex-center position-fixed" 
            style="bottom: 85px; right: 25px; width: 60px; height: 60px; z-index: 1050; border: 3px solid white;">
        <i class="ph-bold ph-plus fs-2"></i>
    </button>

    <!-- Elemento Audio Oculto -->
    <audio id="audio-element" class="hidden" preload="auto"></audio>

    <style>
        /* Animación de rotación para el logo */
        @keyframes spinLogo {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .is-playing-img {
            animation: spinLogo 12s linear infinite;
        }
        .song-item { transition: all 0.2s ease; border: 1px solid #f1f5f9; }
        .song-item:active { transform: scale(0.98); background-color: #fff7ed !important; }
        .song-active { border-color: #fd7e14 !important; background-color: #fff7ed !important; }
    </style>
</div>